{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SreeramYashasvi\\\\Cursor Files\\\\rag-pinecone\\\\frontend\\\\src\\\\components\\\\documentmanager.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Paper, Typography, Box, Checkbox, FormControlLabel, Button, IconButton } from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\nfunction DocumentManager({\n  onSelectionChange,\n  refreshTrigger\n}) {\n  const [documents, setDocuments] = useState([]);\n  const [selectedDocs, setSelectedDocs] = useState([]);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    fetchDocuments();\n  }, [refreshTrigger]);\n  const fetchDocuments = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/documents');\n      if (response.data.data.status === 'processing') {\n        // If documents are still processing, show loading state\n        setError('Processing documents...');\n        // Retry after 2 seconds\n        setTimeout(fetchDocuments, 2000);\n      } else {\n        setDocuments(response.data.data.documents);\n        setError('');\n      }\n    } catch (error) {\n      setError('Failed to fetch documents');\n    }\n  };\n  const handleSelectionChange = document => {\n    const newSelection = selectedDocs.includes(document) ? selectedDocs.filter(doc => doc !== document) : [...selectedDocs, document];\n    setSelectedDocs(newSelection);\n    onSelectionChange(newSelection);\n  };\n  const handleDeleteDocument = async document => {\n    try {\n      await axios.delete(`http://localhost:8000/documents/${encodeURIComponent(document)}`);\n      setDocuments(prev => prev.filter(doc => doc !== document));\n      setSelectedDocs(prev => prev.filter(doc => doc !== document));\n    } catch (error) {\n      setError('Failed to delete document');\n    }\n  };\n  return /*#__PURE__*/React.createElement(Paper, {\n    elevation: 3,\n    sx: {\n      p: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, \"Available Documents\"), error && /*#__PURE__*/React.createElement(Typography, {\n    color: \"error\",\n    sx: {\n      mb: 2\n    },\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, error), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      flex: 1,\n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, documents.map(doc => /*#__PURE__*/React.createElement(Box, {\n    key: doc,\n    sx: {\n      display: 'flex',\n      alignItems: 'center',\n      gap: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      checked: selectedDocs.includes(doc),\n      onChange: () => handleSelectionChange(doc),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }),\n    label: doc,\n    sx: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"delete\",\n    onClick: () => handleDeleteDocument(doc),\n    size: \"small\",\n    sx: {\n      color: 'error.main'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DeleteIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  })))), documents.length === 0 && /*#__PURE__*/React.createElement(Typography, {\n    color: \"text.secondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"No documents uploaded yet\")));\n}\nexport default DocumentManager;","map":{"version":3,"names":["React","useState","useEffect","Paper","Typography","Box","Checkbox","FormControlLabel","Button","IconButton","DeleteIcon","axios","DocumentManager","onSelectionChange","refreshTrigger","documents","setDocuments","selectedDocs","setSelectedDocs","error","setError","fetchDocuments","response","get","data","status","setTimeout","handleSelectionChange","document","newSelection","includes","filter","doc","handleDeleteDocument","delete","encodeURIComponent","prev","createElement","elevation","sx","p","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","variant","gutterBottom","align","color","mb","flex","overflow","display","flexDirection","gap","map","key","alignItems","control","checked","onChange","label","onClick","size","fontSize","length"],"sources":["C:/Users/SreeramYashasvi/Cursor Files/rag-pinecone/frontend/src/components/documentmanager.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Paper, Typography, Box, Checkbox, FormControlLabel, Button, IconButton } from '@mui/material';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport axios from 'axios';\r\n\r\nfunction DocumentManager({ onSelectionChange, refreshTrigger }) {\r\n  const [documents, setDocuments] = useState([]);\r\n  const [selectedDocs, setSelectedDocs] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchDocuments();\r\n  }, [refreshTrigger]);\r\n\r\n  const fetchDocuments = async () => {\r\n    try {\r\n      const response = await axios.get('http://localhost:8000/documents');\r\n      if (response.data.data.status === 'processing') {\r\n        // If documents are still processing, show loading state\r\n        setError('Processing documents...');\r\n        // Retry after 2 seconds\r\n        setTimeout(fetchDocuments, 2000);\r\n      } else {\r\n        setDocuments(response.data.data.documents);\r\n        setError('');\r\n      }\r\n    } catch (error) {\r\n      setError('Failed to fetch documents');\r\n    }\r\n  };\r\n\r\n  const handleSelectionChange = (document) => {\r\n    const newSelection = selectedDocs.includes(document)\r\n      ? selectedDocs.filter(doc => doc !== document)\r\n      : [...selectedDocs, document];\r\n    \r\n    setSelectedDocs(newSelection);\r\n    onSelectionChange(newSelection);\r\n  };\r\n\r\n  const handleDeleteDocument = async (document) => {\r\n    try {\r\n      await axios.delete(`http://localhost:8000/documents/${encodeURIComponent(document)}`);\r\n      setDocuments(prev => prev.filter(doc => doc !== document));\r\n      setSelectedDocs(prev => prev.filter(doc => doc !== document));\r\n    } catch (error) {\r\n      setError('Failed to delete document');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ p: 3 }}>\r\n      <Typography variant=\"h6\" gutterBottom align=\"center\">\r\n        Available Documents\r\n      </Typography>\r\n      {error && (\r\n        <Typography color=\"error\" sx={{ mb: 2 }} align=\"center\">\r\n          {error}\r\n        </Typography>\r\n      )}\r\n      <Box sx={{ \r\n        flex: 1, \r\n        overflow: 'auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: 1\r\n      }}>\r\n        {documents.map((doc) => (\r\n          <Box key={doc} sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={selectedDocs.includes(doc)}\r\n                  onChange={() => handleSelectionChange(doc)}\r\n                />\r\n              }\r\n              label={doc}\r\n              sx={{ flex: 1 }}\r\n            />\r\n            <IconButton\r\n              aria-label=\"delete\"\r\n              onClick={() => handleDeleteDocument(doc)}\r\n              size=\"small\"\r\n              sx={{ color: 'error.main' }}\r\n            >\r\n              <DeleteIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Box>\r\n        ))}\r\n        {documents.length === 0 && (\r\n          <Typography color=\"text.secondary\" align=\"center\">\r\n            No documents uploaded yet\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default DocumentManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}